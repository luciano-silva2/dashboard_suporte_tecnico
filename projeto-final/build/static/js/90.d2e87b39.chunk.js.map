{"version":3,"file":"static/js/90.d2e87b39.chunk.js","mappings":"8VAQA,MAAMA,EAAS,CAAC,UAAW,UAAW,UAAW,WAElC,SAASC,IACtB,MAAOC,EAASC,IAAcC,EAAAA,EAAAA,UAAS,KAChCC,EAAMC,IAAWF,EAAAA,EAAAA,UAAS,CAC/BG,MAAO,EACPC,QAAS,EACTC,WAAY,EACZC,UAAW,EACXC,eAAgB,MAChBC,WAAY,CAAC,EACbC,IAAK,KAGPC,EAAAA,EAAAA,WAAU,KACR,MAAMC,GAAcC,EAAAA,EAAAA,KAAWC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,WAAaC,IACzD,MAAMC,EAAQD,EAASE,KAAKC,IAAIC,IAAG,IAAAC,EAAAC,EAAA,MAAK,CACtCC,GAAIH,EAAIG,MACLH,EAAII,OACPA,MAAqB,QAAfH,EAAAD,EAAII,OAAOA,YAAI,IAAAH,GAAQ,QAARC,EAAfD,EAAiBI,cAAM,IAAAH,OAAR,EAAfA,EAAAI,KAAAL,KAA+B,IAAIM,QAE3C3B,EAAWiB,KAEb,MAAO,IAAML,KACZ,KAEHD,EAAAA,EAAAA,WAAU,KACR,GAAIZ,EAAQ6B,OAAS,EAAG,CACtB,MAAMC,ECpCL,SAAsB9B,GAC3B,MAAMK,EAAQL,EAAQ6B,OAChBvB,EAAUN,EAAQ+B,OAAOC,GAAkB,WAAbA,EAAEC,QAAqBJ,OACrDtB,EAAaP,EAAQ+B,OAAOC,GAAkB,cAAbA,EAAEC,QAAwBJ,OAcjE,MAAO,CACLxB,QACAC,UACAC,aACAC,UAjBgBR,EAAQ+B,OAAOC,GAAkB,iBAAbA,EAAEC,QAA2BJ,OAkBjEpB,eAPqB,sBAQrBC,WAjBiBV,EAAQkC,OAAO,CAACC,EAAKC,KAClCA,EAAOC,UACTF,EAAIC,EAAOC,UAAYF,EAAIC,EAAOC,UAAY,GAAK,GAE9CF,GACN,CAAC,GAaFxB,IAXUN,EAAQ,EAAKE,EAAaF,EAAS,IAAM,EAavD,CDUwBiC,CAAatC,GAC/BI,EAAQ0B,EACV,GACC,CAAC9B,IAEJ,MAAMuC,GAAmBC,EAAAA,EAAAA,SAAQ,IAClB,CACX,CAAEC,KAAM,UAAWC,MAAOvC,EAAKG,SAC/B,CAAEmC,KAAM,aAAcC,MAAOvC,EAAKI,YAClC,CAAEkC,KAAM,YAAaC,MAAOvC,EAAKK,YAGlC,CAACL,IAEEwC,GAAuBH,EAAAA,EAAAA,SAAQ,KACjC,MAAMI,EAAc5C,EAAQkC,OAAO,CAACC,EAAKC,KACrCD,EAAIC,EAAOS,aAAeV,EAAIC,EAAOS,aAAe,GAAK,EAClDV,GACR,CAAC,GACJ,OAAOW,OAAOC,KAAKH,GAAaxB,IAAI4B,IAAC,CAAOP,KAAMO,EAAGN,MAAOE,EAAYI,OACzE,CAAChD,IAGEiD,GAAoBT,EAAAA,EAAAA,SAAQ,IAChCM,OAAOI,QAAQ/C,EAAKO,YAAYU,IAAI+B,IAAA,IAAEd,EAAShC,GAAM8C,EAAA,MAAM,CACzDC,QAASf,EACTgB,EAAGhD,EACHiD,SAAUnD,EAAKE,SAEhB,CAACF,EAAKO,WAAYP,EAAKE,QAG1B,OACEkD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kBAAiBC,SAAA,EAC9BC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,OAAMC,SAAC,qCAGrBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,WAAUC,SAAA,EACvBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAwBC,UACrCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gBAAeC,UAC5BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UACxBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oDAAmDC,SAAA,EAChEF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,aAAYC,SAAC,sBAC3BC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,iBAAgBC,SAAEtD,EAAKE,YAEtCqD,EAAAA,EAAAA,KAACC,EAAAA,IAAW,CAACH,UAAU,wBAK/BE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAwBC,UACnCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gBAAeC,UAC1BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UAC1BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oDAAmDC,SAAA,EAC9DF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACAC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,aAAYC,SAAC,qBAC3BC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,iBAAgBC,SAAEtD,EAAKG,cAEpCoD,EAAAA,EAAAA,KAACE,EAAAA,IAAO,CAACJ,UAAU,wBAK/BE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAwBC,UACnCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gBAAeC,UAC1BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UAC1BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oDAAmDC,SAAA,EAC9DF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACAC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,aAAYC,SAAC,wBAC3BC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,iBAAgBC,SAAEtD,EAAKI,iBAEpCmD,EAAAA,EAAAA,KAACG,EAAAA,IAAa,CAACL,UAAU,wBAKrCE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAwBC,UACnCC,EAAAA,EAAAA,KAAA,OAAKF,UAAW,kBAAiBrD,EAAKQ,IAAM,GAAK,wBAA0B,cAAe8C,UACtFC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UACtBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oDAAmDC,SAAA,EAC9DF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACIC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,aAAYC,SAAC,SAC3BF,EAAAA,EAAAA,MAAA,KAAGC,UAAU,iBAAgBC,SAAA,CAAEtD,EAAKQ,IAAImD,QAAQ,GAAG,WAEvDJ,EAAAA,EAAAA,KAACK,EAAAA,IAAO,CAACP,UAAU,2BAQrCD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,MAAKC,SAAA,EAClBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gBAAeC,UAC5BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACnBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACxBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,aAAYC,SAAC,wBAC3BC,EAAAA,EAAAA,KAACM,EAAAA,EAAmB,CAACC,MAAM,OAAOC,OAAQ,IAAIT,UAC5CF,EAAAA,EAAAA,MAACY,EAAAA,EAAQ,CAAC1C,KAAMc,EAAiBkB,SAAA,EAC/BC,EAAAA,EAAAA,KAACU,EAAAA,EAAa,CAACC,gBAAgB,SAC/BX,EAAAA,EAAAA,KAACY,EAAAA,EAAK,CAACC,QAAQ,UACfb,EAAAA,EAAAA,KAACc,EAAAA,EAAK,KACNd,EAAAA,EAAAA,KAACe,EAAAA,EAAO,KACRf,EAAAA,EAAAA,KAACgB,EAAAA,EAAM,KACPhB,EAAAA,EAAAA,KAACiB,EAAAA,EAAG,CAACJ,QAAQ,QAAQK,KAAK,yBAMpClB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gBAAeC,UAC5BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACnBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACxBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,aAAYC,SAAC,4BAC3BC,EAAAA,EAAAA,KAACM,EAAAA,EAAmB,CAACC,MAAM,OAAOC,OAAQ,IAAIT,UAC5CF,EAAAA,EAAAA,MAACsB,EAAAA,EAAQ,CAAApB,SAAA,EACPC,EAAAA,EAAAA,KAACoB,EAAAA,EAAG,CAACrD,KAAMkB,EAAsBoC,GAAG,MAAMC,GAAG,MAAMC,WAAW,EAAOC,YAAa,GAAIN,KAAK,UAAUL,QAAQ,QAAQY,QAAQ,OAAOC,OAAK,EAAA3B,SACtId,EAAqBvB,IAAI,CAACiE,EAAOC,KAAU5B,EAAAA,EAAAA,KAAC6B,EAAAA,EAAI,CAAuBX,KAAM9E,EAAOwF,EAAQxF,EAAO+B,SAA7C,QAAQyD,SAEjE5B,EAAAA,EAAAA,KAACe,EAAAA,EAAO,KACRf,EAAAA,EAAAA,KAACgB,EAAAA,EAAM,iBAMjBhB,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,UAC3BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACjBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACtBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,aAAYC,SAAC,gCAC1BC,EAAAA,EAAAA,KAACM,EAAAA,EAAmB,CAACC,MAAM,OAAOC,OAAQ,IAAIT,UAC3CF,EAAAA,EAAAA,MAACiC,EAAAA,EAAU,CAACT,GAAG,MAAMC,GAAG,MAAME,YAAY,MAAMzD,KAAMwB,EAAkBQ,SAAA,EACpEC,EAAAA,EAAAA,KAAC+B,EAAAA,EAAS,KACV/B,EAAAA,EAAAA,KAACgC,EAAAA,EAAc,CAACnB,QAAQ,aACxBb,EAAAA,EAAAA,KAACiC,EAAAA,EAAe,KAChBjC,EAAAA,EAAAA,KAACkC,EAAAA,EAAK,CAACnD,KAAK,UAAU8B,QAAQ,IAAIsB,OAAO,UAAUjB,KAAK,UAAUkB,YAAa,MAC9EpC,EAAAA,EAAAA,KAACe,EAAAA,EAAO,KACTf,EAAAA,EAAAA,KAACgB,EAAAA,EAAM,qBASnC,C","sources":["Pages/Dashboard/Dashboard.jsx","Pages/Dashboard/kpiUtils.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { db } from '../../Firebase/firebase';\nimport { collection, onSnapshot } from 'firebase/firestore';\nimport { FaTicketAlt, FaTools, FaCheckCircle, FaClock } from 'react-icons/fa';\nimport { BarChart, Bar, LineChart, Line, PieChart, Pie, RadarChart, Radar, PolarGrid, PolarAngleAxis, PolarRadiusAxis, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, Cell } from 'recharts';\nimport { calcularKPIs } from './kpiUtils';\nimport './Dashboard.css';\n\nconst COLORS = ['#0088FE', '#00C49F', '#FFBB28', '#FF8042'];\n\nexport default function Dashboard() {\n  const [tickets, setTickets] = useState([]);\n  const [kpis, setKpis] = useState({\n    total: 0,\n    abertos: 0,\n    resolvidos: 0,\n    pendentes: 0,\n    mediaResolucao: 'N/A',\n    porTecnico: {},\n    sla: 0,\n  });\n\n  useEffect(() => {\n    const unsubscribe = onSnapshot(collection(db, 'tickets'), (snapshot) => {\n      const dados = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data(),\n        data: doc.data().data?.toDate?.() || new Date()\n      }));\n      setTickets(dados);\n    });\n    return () => unsubscribe();\n  }, []);\n\n  useEffect(() => {\n    if (tickets.length > 0) {\n      const novosKPIs = calcularKPIs(tickets);\n      setKpis(novosKPIs);\n    }\n  }, [tickets]);\n\n  const ticketsPorStatus = useMemo(() => {\n    const data = [\n      { name: 'Abertos', value: kpis.abertos },\n      { name: 'Resolvidos', value: kpis.resolvidos },\n      { name: 'Pendentes', value: kpis.pendentes },\n    ];\n    return data;\n  }, [kpis]);\n\n  const ticketsPorPrioridade = useMemo(() => {\n      const prioridades = tickets.reduce((acc, ticket) => {\n          acc[ticket.prioridade] = (acc[ticket.prioridade] || 0) + 1;\n          return acc;\n      }, {});\n      return Object.keys(prioridades).map(p => ({ name: p, value: prioridades[p] }));\n  }, [tickets]);\n\n\n  const ticketsPorTecnico = useMemo(() => (\n    Object.entries(kpis.porTecnico).map(([tecnico, total]) => ({\n      subject: tecnico,\n      A: total,\n      fullMark: kpis.total\n    }))\n  ), [kpis.porTecnico, kpis.total]);\n\n\n  return (\n    <div className=\"container-fluid\">\n      <h3 className=\"mb-4\">Dashboard de Suporte Técnico</h3>\n\n      {/* Painel de KPIs */}\n      <div className=\"row mb-4\">\n        <div className=\"col-lg-3 col-md-6 mb-4\">\n          <div className=\"card card-kpi\">\n            <div className=\"card-body\">\n              <div className=\"d-flex justify-content-between align-items-center\">\n                <div>\n                  <h5 className=\"card-title\">Total de Tickets</h5>\n                  <p className=\"card-text fs-2\">{kpis.total}</p>\n                </div>\n                <FaTicketAlt className=\"card-icon\" />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"col-lg-3 col-md-6 mb-4\">\n            <div className=\"card card-kpi\">\n                <div className=\"card-body\">\n                <div className=\"d-flex justify-content-between align-items-center\">\n                    <div>\n                    <h5 className=\"card-title\">Tickets Abertos</h5>\n                    <p className=\"card-text fs-2\">{kpis.abertos}</p>\n                    </div>\n                    <FaTools className=\"card-icon\" />\n                </div>\n                </div>\n            </div>\n        </div>\n        <div className=\"col-lg-3 col-md-6 mb-4\">\n            <div className=\"card card-kpi\">\n                <div className=\"card-body\">\n                <div className=\"d-flex justify-content-between align-items-center\">\n                    <div>\n                    <h5 className=\"card-title\">Tickets Resolvidos</h5>\n                    <p className=\"card-text fs-2\">{kpis.resolvidos}</p>\n                    </div>\n                    <FaCheckCircle className=\"card-icon\" />\n                </div>\n                </div>\n            </div>\n        </div>\n        <div className=\"col-lg-3 col-md-6 mb-4\">\n            <div className={`card card-kpi ${kpis.sla > 90 ? 'bg-success text-white' : 'bg-warning'}`}>\n                <div className=\"card-body\">\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                        <div>\n                            <h5 className=\"card-title\">SLA</h5>\n                            <p className=\"card-text fs-2\">{kpis.sla.toFixed(2)}%</p>\n                        </div>\n                        <FaClock className=\"card-icon\" />\n                    </div>\n                </div>\n            </div>\n        </div>\n      </div>\n\n      {/* Gráficos */}\n      <div className=\"row\">\n        <div className=\"col-lg-6 mb-4\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <h5 className=\"card-title\">Tickets por Status</h5>\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <BarChart data={ticketsPorStatus}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"name\" />\n                  <YAxis />\n                  <Tooltip />\n                  <Legend />\n                  <Bar dataKey=\"value\" fill=\"#8884d8\" />\n                </BarChart>\n              </ResponsiveContainer>\n            </div>\n          </div>\n        </div>\n        <div className=\"col-lg-6 mb-4\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <h5 className=\"card-title\">Tickets por Prioridade</h5>\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <PieChart>\n                  <Pie data={ticketsPorPrioridade} cx=\"50%\" cy=\"50%\" labelLine={false} outerRadius={80} fill=\"#8884d8\" dataKey=\"value\" nameKey=\"name\" label>\n                    {ticketsPorPrioridade.map((entry, index) => <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />)}\n                  </Pie>\n                  <Tooltip />\n                  <Legend />\n                </PieChart>\n              </ResponsiveContainer>\n            </div>\n          </div>\n        </div>\n        <div className=\"col-lg-12 mb-4\">\n            <div className=\"card\">\n                <div className=\"card-body\">\n                    <h5 className=\"card-title\">Performance por Técnico</h5>\n                     <ResponsiveContainer width=\"100%\" height={300}>\n                        <RadarChart cx=\"50%\" cy=\"50%\" outerRadius=\"80%\" data={ticketsPorTecnico}>\n                            <PolarGrid />\n                            <PolarAngleAxis dataKey=\"subject\" />\n                            <PolarRadiusAxis />\n                            <Radar name=\"Tickets\" dataKey=\"A\" stroke=\"#8884d8\" fill=\"#8884d8\" fillOpacity={0.6} />\n                             <Tooltip />\n                            <Legend />\n                        </RadarChart>\n                    </ResponsiveContainer>\n                </div>\n            </div>\n        </div>\n      </div>\n    </div> \n  );\n}","export function calcularKPIs(tickets) {\n  const total = tickets.length;\n  const abertos = tickets.filter(t => t.status === 'aberto').length;\n  const resolvidos = tickets.filter(t => t.status === 'resolvido').length;\n  const pendentes = tickets.filter(t => t.status === 'em_andamento').length;\n\n  const porTecnico = tickets.reduce((acc, ticket) => {\n    if (ticket.tecnico) {\n      acc[ticket.tecnico] = (acc[ticket.tecnico] || 0) + 1;\n    }\n    return acc;\n  }, {});\n\n  const sla = total > 0 ? (resolvidos / total) * 100 : 0;\n  \n  const mediaResolucao = \"Dados insuficientes\";\n\n  return {\n    total,\n    abertos,\n    resolvidos,\n    pendentes,\n    mediaResolucao,\n    porTecnico,\n    sla,\n  };\n}"],"names":["COLORS","Dashboard","tickets","setTickets","useState","kpis","setKpis","total","abertos","resolvidos","pendentes","mediaResolucao","porTecnico","sla","useEffect","unsubscribe","onSnapshot","collection","db","snapshot","dados","docs","map","doc","_doc$data$data","_doc$data$data$toDate","id","data","toDate","call","Date","length","novosKPIs","filter","t","status","reduce","acc","ticket","tecnico","calcularKPIs","ticketsPorStatus","useMemo","name","value","ticketsPorPrioridade","prioridades","prioridade","Object","keys","p","ticketsPorTecnico","entries","_ref","subject","A","fullMark","_jsxs","className","children","_jsx","FaTicketAlt","FaTools","FaCheckCircle","toFixed","FaClock","ResponsiveContainer","width","height","BarChart","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","Tooltip","Legend","Bar","fill","PieChart","Pie","cx","cy","labelLine","outerRadius","nameKey","label","entry","index","Cell","RadarChart","PolarGrid","PolarAngleAxis","PolarRadiusAxis","Radar","stroke","fillOpacity"],"sourceRoot":""}